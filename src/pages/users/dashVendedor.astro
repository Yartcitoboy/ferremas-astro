---
// Importa las dependencias necesarias
import { Package, ShoppingCart, Truck, CheckCircle, XCircle, Search } from "@lucide/astro";
import MainLayout from "@/layouts/MainLayout.astro";

// Datos iniciales vacíos
let inventarioData: {
  id_producto: number;
  nombre: string;
  categoria: string;
  stock: number;
  precio: number;
}[] = [];

// Función para obtener los datos de inventarios desde la API
async function fetchInventario() {
  try {
    const response = await fetch("http://localhost:6500/product"); // Cambia el puerto si es necesario
    if (!response.ok) {
      throw new Error("Error al obtener los datos de inventario");
    }
    inventarioData = await response.json();
  } catch (error) {
    console.error("Error al obtener inventarios:", error);
  }
}

// Llama a la función para obtener los datos al cargar la página
await fetchInventario();
---

<MainLayout>
  <div class="flex min-h-screen flex-col bg-neutral-900 text-white">
    <!-- Header -->
    <header class="sticky top-0 z-10 flex h-16 items-center gap-4 border-b border-neutral-700 bg-neutral-800 px-6">
      <h1 class="text-xl font-semibold text-orange-500">Panel de Vendedor</h1>
    </header>

    <!-- Inventario -->
    <section class="p-6">
      <h2 class="text-lg font-semibold text-orange-500">Inventario</h2>
      <table class="w-full border-collapse text-left text-sm text-neutral-400">
        <thead class="bg-neutral-700 text-neutral-300">
          <tr>
            <th class="border border-neutral-700 px-4 py-2">Código</th>
            <th class="border border-neutral-700 px-4 py-2">Nombre</th>
            <th class="border border-neutral-700 px-4 py-2">Categoría</th>
            <th class="border border-neutral-700 px-4 py-2">Stock</th>
            <th class="border border-neutral-700 px-4 py-2">Precio</th>
          </tr>
        </thead>
        <tbody>
          {inventarioData.map((producto) => (
            <tr class="hover:bg-neutral-700">
              <td class="border border-neutral-700 px-4 py-2">{producto.id_producto}</td>
              <td class="border border-neutral-700 px-4 py-2">{producto.nombre}</td>
              <td class="border border-neutral-700 px-4 py-2">{producto.categoria}</td>
              <td class="border border-neutral-700 px-4 py-2">{producto.stock}</td>
              <td class="border border-neutral-700 px-4 py-2">${producto.precio}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </section>
  </div>
</MainLayout>